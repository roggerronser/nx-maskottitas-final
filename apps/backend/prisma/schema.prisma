// Prisma schema file

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// =========================
// ADMIN 
// =========================
model Admin {
  id_admin   Int    @id @default(autoincrement())
  nombre     String
  apellido   String
  telefono   String
  username   String @unique
  password   String
}

// =========================
// CLIENTE
// =========================
model Cliente {
  id_cliente Int        @id @default(autoincrement())
  nombres    String
  apellidos  String
  direccion  String
  telefono   Int
  pacientes  Paciente[]
}

// =========================
// PACIENTE
// =========================
model Paciente {
  id_paciente Int        @id @default(autoincrement())
  paciente    String
  especie     String
  raza        String
  sexo        String
  id_cliente  Int
  cliente     Cliente    @relation(fields: [id_cliente], references: [id_cliente], onDelete: Cascade)
  consultas   Consulta[]
  vacunas     Vacuna[]
}

// =========================
// CONSULTA
// =========================
model Consulta {
  id_consulta            Int        @id @default(autoincrement())
  edad                   Int
  anamnesis              String
  caracteristica         String
  temperatura            Decimal
  fc                     Int
  fr                     Int
  hidratacion            String
  mucosas                String
  tiempo_relleno_capilar String
  spo2                   Decimal
  glucosa                Decimal
  presion_arterial       String
  otros                  String
  fecha_consulta         DateTime
  estado_consulta        Int
  id_paciente            Int
  paciente               Paciente   @relation(fields: [id_paciente], references: [id_paciente], onDelete: Cascade)
  sintomas               Sintoma[]  @relation("ConsultaSintomas")
  examenes               Examen[]
}

// =========================
// SINTOMA
// =========================
model Sintoma {
  id_sintoma  Int        @id @default(autoincrement())
  sintoma     String
  consultas   Consulta[] @relation("ConsultaSintomas")
}

// =========================
// EXAMEN
// =========================
model Examen {
  id_examen         Int         @id @default(autoincrement())
  tipo_examen       String
  diagnt_presuntivo String
  id_consulta       Int
  consulta          Consulta    @relation(fields: [id_consulta], references: [id_consulta], onDelete: Cascade)
  pdfs              Pdf[]
  resultados        Resultado[]
}

// =========================
// PDF
// =========================
model Pdf {
  id_pdf    Int     @id @default(autoincrement())
  pdf       String
  id_examen Int
  examen    Examen  @relation(fields: [id_examen], references: [id_examen], onDelete: Cascade)
}

// =========================
// RESULTADO
// =========================
model Resultado {
  id_resultado      Int      @id @default(autoincrement())
  diagnt_definitivo String
  tratamiento       String
  prox_cita         DateTime
  observaciones     String
  id_examen         Int
  examen            Examen   @relation(fields: [id_examen], references: [id_examen], onDelete: Cascade)
}

// =========================
// VACUNA
// =========================
model Vacuna {
  id_vacuna          Int           @id @default(autoincrement())
  aplicacion_vacuna  String
  estado_vacuna      Int
  temperatura_vacuna String
  fc_vacuna          String
  fr_vacuna          String
  mucosa_vacuna      String
  fecha_vacuna       DateTime
  proxima_vacuna     DateTime
  id_paciente        Int
  paciente           Paciente      @relation(fields: [id_paciente], references: [id_paciente], onDelete: Cascade)
  tipos_vacuna       TipoVacuna[]  @relation("VacunaTipos")
}

// =========================
// TIPO VACUNA
// =========================
model TipoVacuna {
  id_tipo_vacuna Int       @id @default(autoincrement())
  tipo_vacuna    String
  vacunas        Vacuna[]  @relation("VacunaTipos")
}
